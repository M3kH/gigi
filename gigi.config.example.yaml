# Gigi Configuration — Example
#
# Copy this to gigi.config.yaml and customize for your setup.
# Secrets go in env vars, structure goes here.
# Supports env var interpolation: ${VAR_NAME} and ${VAR_NAME:-default}

# ── Agent Configuration ──────────────────────────────────────────────
# Customize the agent's identity and behavior.
# All fields are optional — sensible defaults are used if omitted.

agent:
  # Agent display name (used in prompts and git commits)
  name: Gigi
  # Short description/role shown in the system prompt
  description: a persistent AI coordinator
  # Gitea organization for repo operations
  org: ${GITEA_ORG:-idea}
  # Git identity for the agent (used as Co-Authored-By when author override is set)
  git:
    name: Gigi
    email: gigi@localhost
    # Optional: override the commit author (operator identity).
    # When set, commits are authored as this identity and the agent
    # appears only as Co-Authored-By in commit messages.
    # Example:
    #   author:
    #     name: Your Name
    #     email: you@example.com
  # Optional: Extra infrastructure context shown to the agent
  # infrastructure: "3-node ARM64 cluster running Docker Swarm"
  # Optional: Extra prompt sections appended to system prompt (inline)
  # extra_sections: "## Custom Rules\n- Always use TypeScript\n- Follow project conventions"

  # Optional: Path to an extra prompt file for deployment-specific sections.
  # This enables "dev" vs "generic" prompt profiles:
  # - Generic users: Don't set this → base prompt only
  # - Dev team: Mount a prompt file via Docker and set AGENT_EXTRA_PROMPT_FILE
  #
  # The file should be a markdown document with additional ## sections.
  # Example: extra_prompt_file: /config/dev-prompt.md
  extra_prompt_file: ${AGENT_EXTRA_PROMPT_FILE:-}

# ── Dynamic Context ─────────────────────────────────────────────────
# The following context is auto-injected into the prompt at build time:
#
# {{repos}}      — List of org repos with descriptions (from Gitea API)
# {{mcp_tools}}  — List of registered MCP tools with descriptions
#
# These are populated automatically. No configuration needed.

# ── Backup Configuration ─────────────────────────────────────────────

backup:
  sources:
    # Back up all repos in the configured org
    - org: ${GITEA_ORG:-idea}

  targets:
    # Git mirror to secondary Gitea (optional)
    - type: git-mirror
      name: git-mirror
      url: ${MIRROR_GIT_URL:-}
      auth: token
      token: ${MIRROR_GIT_TOKEN:-}
      api_token: ${MIRROR_GIT_TOKEN:-}
      create_repos: true

  schedule:
    interval: ${BACKUP_INTERVAL:-6h}
    before_deploy: true
