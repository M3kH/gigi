[supervisord]
nodaemon=true
logfile=/var/log/chrome/supervisord.log

[program:xvfb]
command=Xvfb :99 -screen 0 1920x1080x24 -ac
autorestart=true
priority=100

[program:chromium]
command=chromium --no-sandbox --disable-gpu --disable-dev-shm-usage
  --no-first-run --start-maximized --force-dark-mode
  --window-size=1920,1080 --window-position=0,0
  --display=:99
  --remote-debugging-port=9222
  --remote-allow-origins=*
  --user-data-dir=/tmp/chrome-profile
environment=DISPLAY=":99"
autorestart=true
priority=200
stdout_logfile=/var/log/chrome/chromium.log
redirect_stderr=true

[program:x11vnc]
command=x11vnc -display :99 -forever -nopw -shared -rfbport 5900 -xkb
autorestart=true
priority=300
stdout_logfile=/var/log/chrome/x11vnc.log
redirect_stderr=true

[program:websockify]
command=websockify --web=/usr/share/novnc 6080 localhost:5900
autorestart=true
priority=400
stdout_logfile=/var/log/chrome/websockify.log
redirect_stderr=true

[program:cdp-relay]
command=nginx -g "daemon off;"
autorestart=true
priority=500
user=root
stdout_logfile=/var/log/chrome/nginx.log
redirect_stderr=true
